#!/bin/bash

# 작성날짜 : 2022년 7월 6일 
# 작성자 : 우은지
# 동작방식 : SMTP 서버의 릴레이 기능 활성화 여부를 확인하는 코드

value1=$(ps -ef | grep "sendmail")
value2=$(cat /etc/mail/sendmail.cf | grep "R$ \*" |grep "Relaying denied")

if [ -n "$value1" ] 
    then
        if [ -n "$value2" ] 
	then
            echo -e "[unsafe] using SMTP-Relaying service" >> u31.log
	else
            echo -e "[safe] not using SMTP-Relaying service" >> u31.log
        fi
    else
        echo -e "[safe] not using sendmail service" >> u31.log
fi