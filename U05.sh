#!/bin/bash

# 작성날짜 : 2022년 6월 8일 
# 작성자 : 우은지
# 동작방식 : 패스워드 파일 보호가 잘 이루어지고 있는지 확인하기 위한 코드 
# (shadow 파일이 존재하는지 test 명령을 이용해 확인하고, passwd 파일이 암호화 되어있는지, 즉 두번째 필드에 x가 있는지 확인하는 코드
# -> shadow 파일을 사용하거나 passwd 파일을 암호화해서 사용하는 경우 safe로 판단, shadow 파일을 사용하지 않거나 passw 파일을 암호화하지 않고 사용하는 경우 unsafe로 판단)

if test -f '/etc/shadow'; then
    echo "usr /etc/shadow" >> u05.log
    echo -e "[safe]\n\n" >> u05.log
else
    echo "No /etc/shadow" >> u05.log
    echo -e "[unsafe]\n\n" >> u05.log
fi

if [ "`cat /etc/passwd | grep root:x`" ]; then
        echo -e "use encryption" >> u05.log
        echo -e "[safe]\n\n" >> u05.log
else
    echo "unused encryption" >> u05.log
    echo -e "[unsafe]\n\n" >> u05.log
fi